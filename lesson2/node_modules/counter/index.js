"use strict";

//let fs = require("fs");
let data = require(__dirname+"/data.json");

/**
 * @constructor Counter
 */
function Counter(){

    /**
     * Значение счетчика
     * @returns {string}
     */
    this.getCount = function(){
        return data.counter;
    }

    /**
     * Увеличивает значение счетчика на 1
     * @returns {void}
     */
    this.setCount = function(){
        try {
            data.counter++;
            fs.writeFile(__dirname+"/data.json", JSON.stringify(data, null, 4), (err) => {
                if(err) throw err;
            });
        } catch(e){
            console.log(e);
        }
    }

    /**
     * Очистить счетчик
     * @returns {void}
     */
    this.clearCount = function(){
        try {
            fs.writeFile(__dirname+"/data.json", JSON.stringify({"counter":0}, null, 4), (err) => {
                if(err) throw err;
            });
        } catch(e){
            console.log(e);
        }
    }

}

module.exports = new Counter();
